
---
title: 'Uniswap 유동성 공급자 관련 내용, 동작원리'
permlink: uniswap
catalog: true
toc_nav_num: true
toc: true
position: 9999
date: 2019-12-30 11:22:03
categories:
- sct
tags:
- sct
- sct-kr
- sct-dev
- kr-dev
- busy
- sct-invest
thumbnail: 'https://cdn.steemitimages.com/DQmXpBgZxeKHJhzZcpRTdTYWLCTNEPgmdne15TqXK2PrzxF/image.png'
sidebar:
    right:
        sticky: true
widgets:
    -
        type: toc
        position: right
---


안녕하세요. 제이콥입니다. 

Uniswap에는 두 종류의 사용자가 있습니다.
swap을 원하는사람. 토큰을 공급하는사람 (유동성공급자).
유동성공급자에 대해 적어봅니다.

저도 공부하면서 적은거라 틀린내용이 있을 수 있습니다. 
틀린내용이 있으면 말해주세요.

---
#### 유동성 공급자 과정

1. 유동성공급자는 ETH와 ERC-20토큰를 입금해야합니다. 
2. 입금을 하고 보상풀 토큰을 받습니다.
3. 보상풀 토큰을 소각하여 언제든지 ETH와 ERC-20토큰을 회수할 수 있습니다.

#### Uniswap의 유동성공급자가 되는 이유가 무엇일까요? 

수익이 있기 때문입니다.

각 swap 트랜잭션에서 0.3%씩 수수료가 ETH pool, ERC-20토큰 pool에 쌓입니다. (입금한 토큰으로 fee가 쌓입니다.) pool에 쌓인걸 보상풀토큰을 갖고있는 비율만큼 언제든지 가져갈 수 있습니다.

아래에서 예를 들겠지만, 공급을 해놓고 한달동안 스왑이 꾸준히 지속되면 fee는 pool에 쌓입니다. 기존에 공급했던 양보다 많이 쌓이겠죠. 풀보상토큰은 똑같이 갖고 있고 가져갈 비율은 똑같지만, pool이 커졌습니다. 

즉, pool에 수수료가 쌓여서 기존보다 토큰이 많은 양이 있다고 가정하면요. 보상풀 소각할때, 기존보다 더 많은 수량의 토큰을 가져갈 수 있습니다.

#### 왜 트랜잭션이 있을까?

차익을 얻고싶어하는 사람들이 시장과 uniswap을 보면서 거래를 하고, 차익을 실현합니다. 그러면서 fee가 ETH pool과 ERC-20 pool에 쌓입니다.



####  보상풀 토큰 받기

유동성 공급자는 동일한 가치의 ETH와 ERC-20토큰를 입금하고 보상풀 토큰을 받습니다.

받게되는 보상풀 토큰 = 전체 보상풀 토큰 갯수 * (이더리움 입금) / ( 이더리움 풀 개수)

![](https://cdn.steemitimages.com/DQmXpBgZxeKHJhzZcpRTdTYWLCTNEPgmdne15TqXK2PrzxF/image.png)


예를 들어봅시다. ETH와 OMG로 하겠습니다.

초기에 A가 이더리움 100개와 그 가치와 동일한 OMG 토큰 (5000개로 가정한다.)을 넣어놨습니다. ETH-OMG를 100개 줍니다.

다음에 B가 이더리움 5개와 그 가치와 동일한 OMG토큰을 넣었습니다.
이 때, B가 받을 ETH-OMG는 100 * 5/100 = 5 ETH-OMG입니다.

다음으로 C가 이더리움 15개를 넣습니다. C는 105* 15/105 = 15 ETH-OMG를 받습니다.

보상풀 토큰을 받기 위해선, 동일한 가치의 OMG를 넣어야했는데요,
A는 초기 유동성공급자인데, 이사람이 가격을 결정한거로 보면 됩니다.
B는  5ETH와 같이, 5000 *5/100 만큼의 OMG를 넣어야합니다. 
C는 750OMG를 넣습니다.

최종적으로는 
A : 100ETH, 5000OMG, 100 ETH-OMG (83.3%)
B : 5ETH, 250OMG, 5 ETH-OMG (4.1%)
C : 15ETH, 750OMG, 15 ETH-OMG (12.5%)
를 갖게됩니다.




#### 보상풀 토큰으로 수익 가져가기

자! 초기 공급자는 A,B,C입니다. 그 후에 아무도 공급자가 없다고 해봅시다.
그렇게 1달동안 거래가 있었습니다. 거래가 생길수록 fee는 ETH, OMG pool에 쌓입니다.

ETH가 120에서 150으로 늘어났다고 가정해봅시다.
OMG는 6000에서 7000으로 늘어났고요.

B는 자신이 갖고 있는 ETH-OMG 토큰을 소각하여 수익을 얻고 싶습니다.
B는 5ETH-OMG를 소각해봅시다.

B가 받을 ETH와 OMG는 다음과 같습니다.
ETH = 150* 0.041 = 6.15
OMG = 7000*0.041= 287

기존에 갖고 있던것 수량보다 늘었습니다.
ETH는 5 -> 6.15, OMG는 250 -> 287로요.

![](https://cdn.steemitimages.com/DQmaEGBPFf3sM8pFyAaaQh74VruGRt82bF9aryoQLMdMAk1/image.png)

제가 만든 예시는 아주 이상적인 경우입니다.



#### 유동성공급자가 수익이 나지 않는 경우

ETH, ERC-20 토큰가격이 떨어지면 수익이 안납니다.
이더리움 가격이 떨어지면 손해입니다.

다만, 이더리움을 그냥 홀딩하고 있는것과 uniswap에 넣는것과의 차이는 
이더리움의 변동성을 줄여주는 효과가 있다고 합니다.
잘모르겠지만 주식과 예금을 반반하는 느낌일듯합니다.

아래 표에서 at의 의미는 풀의 확장 속도를 말합니다. 만약에 이더리움 가격이 엄청 오르면 이더리움을 그대로 갖고 있는게 이득입니다.
 

![](https://cdn.steemitimages.com/DQmUvYuq4JhTBuRdxBQNW4ZP1j7nVtSBFtbmyGHDuqvsSXD/image.png)

실제 풀의 확장을 보는건 아래 이미지로 확인해볼 수 있습니다.
![](https://cdn.steemitimages.com/DQmPK32J4C9kNqnL3ckFj3UXC4mQeWUj69zivjSmuWgjdq2/image.png)

![](https://cdn.steemitimages.com/DQmRCeW2jjZHaFbDLMdjkeeKYHo58oygZ3DFNSU437VC8vH/image.png)

#### 결론

uniswap의 유동성 공급자와 유사한 시스템을 찾아보면요. 스팀코인판의 sctm의 sct 마이닝이나 krwp 보팅과 유사합니다.

sctm 스테이킹한 만큼, krwp 갖고 있는 비율에 따라 보상이 주어지는 것처럼 uniswap의 유동성공급자는 pool에서 자신의 비율만큼 가져갈 수 있습니다. pool은 수수료 덕분에 점점 커지고요.

감사합니다.

#### 참고자료

* [유니스왑 수식](https://github.com/runtimeverification/verified-smart-contracts/blob/uniswap/uniswap/x-y-k.pdf)
* [유니스왑 백서](https://hackmd.io/C-DvwDSfSxuh-Gd4WKE_ig#Providing-Liquidity)
* [유니스왑 공급자관점 좋은설명](https://medium.com/@pintail/uniswap-a-good-deal-for-liquidity-providers-104c0b6816f2)
* [전체적인 설명](https://medium.com/block-journal/uniswap-understanding-the-decentralised-ethereum-exchange-5ee5d7878996?)
* [uniswap roi](https://zumzoom.github.io/analytics/uniswap/roi.html)
* [dai growth](https://uniswap.info/token/0x6b175474e89094c44da98b954eedeac495271d0f )

- - -

This page is synchronized from the post: ['Uniswap 유동성 공급자 관련 내용, 동작원리'](https://steemit.com/@jacobyu/uniswap)
